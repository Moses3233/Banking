package com.myBank.main;

import java.util.Scanner;

import org.apache.log4j.Logger;

import com.myBank.DAO.impl.bankCustomerDAOImpl;
import com.myBank.DAO.impl.bankEmployeeDAOImpl;
import com.myBank.exceptions.BusinessException;

public class bankAppMain {

	private static Logger log=Logger.getLogger(bankAppMain.class);

	
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
	
		int welcomeOption;
		
		log.info("Welcome to the Bank! Do you already have an account with us?");
		
		do {
			
		log.info("\nEnter \"1\" for yes or \"2\" for no.\nEnter \"3\" to exit now");
		
			welcomeOption = Integer.parseInt(sc.nextLine()) ;
		
		
		switch(welcomeOption) {
		case 1:
			int loginOption;
			
			do {
			log.info("Logging into an existing account...\nAre you an employee(Enter \"1\") or a customer(Enter \"2\")?");

			loginOption = Integer.parseInt(sc.nextLine()) ;
			
			switch(loginOption) {
			case 1:
				log.info("You're an employee? Got it");
				
				
				bankEmployeeDAOImpl daoE = new bankEmployeeDAOImpl();
				
				try {
					daoE.employeeLogin();
					
					log.info("These options need implementation");
					
				} catch (BusinessException e) {
					log.info("Error!");
				}
				
				break;
				
			case 2:
				log.info("Welcome Customer! Login:");
				
				bankEmployeeDAOImpl dao = new bankEmployeeDAOImpl();
				
				try {
					dao.customerLogin();
					
					bankCustomerDAOImpl daoC = new bankCustomerDAOImpl();
					int customID = dao.customerLogin();
					int customerOption;
					log.info("These options need implementation");
					do {
						log.info("Welcome valued Customer! What would you like to do?");
						log.info("1) View Account\n2) Deposit\n3) Withdraw\n4) Post Transfer\n5) Accept Transfer\n6) Exit");
						customerOption = Integer.parseInt(sc.nextLine()) ;
						
					switch(customerOption) {
					case 1:
						daoC.viewAccount(customID);
						break;
					case 2:
						break;
					case 3:
						break;
					case 4:
						break;
					case 5:
						break;
					case 6:
						break;
					default:
						break;
					
					
					}
					
					}while(customerOption!=6);
					
				} catch (BusinessException e) {
					log.info("Error!");
				}
				
				
				
				break;
			default:
				log.info("Not a valid option. Try again.");
			}
			
			}while(loginOption!=1&&loginOption!=2);
			
			break;
			
		case 2:
			log.info("This is to create a new account. Just need to ask a few questions:");
			
			bankEmployeeDAOImpl signUp = new bankEmployeeDAOImpl();
			
			try {
				if(signUp.createUser()!=null) {
				log.info("User created successfully. But you will need an account");
				signUp.createAccount(signUp.createUser());
				}
			
			} catch (BusinessException e) {
			log.info("An error occured while making your account");
			}
			break;
			
		case 3:
			log.info("Exiting... Have a good day.");
			System.exit(0);
			break;
			
		default:
			log.info("Not a valid option. Try again");
		
		}
		
		}while(welcomeOption!=3);
		
		sc.close();
	}

}
